oboutGrid.prototype.synchronizeHorizontalScrolling=function(){if(this.NumberOfFixedColumns==0){if(this.GridHeaderContainer)this.GridHeaderContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;this.GridBodyContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;if(this.AllowFiltering&&this.FilterContainer)this.FilterContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;if(this.GridColumnsFooterContainer)this.GridColumnsFooterContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;this.ScrollTop=this.GridBodyContainer.scrollTop;this.ScrollLeft=this.HorizontalScroller.firstChild.scrollLeft}else{if(this.GridHeaderContainer&&this.GridHeaderContainer.firstChild.scrollLeft!=0)this.GridHeaderContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;if(this.GridBodyContainer.firstChild.scrollLeft!=0)this.GridBodyContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;if(this.AllowFiltering&&this.FilterContainer&&this.FilterContainer.firstChild.scrollLeft!=0)this.FilterContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;if(this.GridColumnsFooterContainer&&this.GridColumnsFooterContainer.firstChild.scrollLeft)this.GridColumnsFooterContainer.firstChild.scrollLeft=this.HorizontalScroller.firstChild.scrollLeft;window.setTimeout(this.ID+".synchronizeFixedColumns()",250)}};oboutGrid.prototype.synchronizeBodyHorizontalScrolling=function(){if(this.GridBodyContainer.firstChild.scrollLeft!=this.HorizontalScroller.firstChild.scrollLeft)this.HorizontalScroller.firstChild.scrollLeft=this.GridBodyContainer.firstChild.scrollLeft;if(this.NumberOfFixedColumns!=0&&this.GridBodyContainer.firstChild.scrollLeft!=this.GridHeaderContainer.firstChild.scrollLeft)this.GridHeaderContainer.firstChild.scrollLeft=this.GridBodyContainer.firstChild.scrollLeft};oboutGrid.prototype.initializeScrollingSettings=function(){var a=this;this._lastScrollTopUsedForVirtualScrolling=0;if(this.ScrollWidth!="0px"){var b=this.getHorizontalScrollBarHeight(this.HorizontalScroller.firstChild);if(this.HorizontalScroller.offsetHeight!=b){var d=this.HorizontalScroller.offsetHeight-b;this.HorizontalScroller.style.height=b+"px";this.HorizontalScroller.firstChild.style.height=this.HorizontalScroller.firstChild.offsetHeight-d+"px"}if(this.NumberOfFixedColumns!=0&&this.FixedColumnsPosition==2){this.rightAlignGridContent();this.PreviousFixedColumnsWidth=this.getFixedColumnsWidth()}else this.PreviousFixedColumnsWidth=null;this.HorizontalScroller.firstChild.onscroll=function(){a.synchronizeHorizontalScrolling()};this.GridBodyContainer.firstChild.onscroll=function(){a.synchronizeBodyHorizontalScrolling()};this.PreviousScrollLeft=0;this.HorizontalScroller.firstChild.scrollLeft=this.ScrollLeft;this.synchronizeHorizontalScrolling()}if(this.ScrollHeight!="0px"){if(this.Width.indexOf("%")!=-1)if(this.GridBodyContainer.offsetWidth-this.GridBodyContainer.firstChild.offsetWidth>0)this.GridBodyContainer.firstChild.style.marginRight=this.GridBodyContainer.firstChild.offsetWidth-this.GridBodyContainer.offsetWidth+"px";this.GridBodyContainer.onscroll=function(){if(!a._preventVirtualScrolling)a._synchronizeVerticalScrolling();else a._preventVirtualScrolling=false}}this.keepVerticalScrollingInSynch();(this.ScrollHeight.indexOf("%")!=-1||this.Height.indexOf("%")!=-1)&&this.addEvent(window,"resize",function(){a.keepVerticalScrollingInSynch()});if(this.ScrollHeight!="0px"&&this.ScrollHeight.indexOf("%")==-1){var c=this.isIEWithDoctype();if(this.isIE&&(this.isIE6||!c)){this.keepFixedVerticalScrollingInSynch();this.GridBodyContainer.firstChild.onresize=function(){a.keepFixedVerticalScrollingInSynch()}}}};oboutGrid.prototype._synchronizeVerticalScrolling=function(){if(this.ShowLoadingMessage&&this.LoadingMessageContainer){this.LoadingMessageContainer.style.top=this.GridBodyContainer.scrollTop+"px";this.LoadingMessageContainer.style.bottom=0-this.GridBodyContainer.scrollTop+"px"}if(this._lastScrollTopUsedForVirtualScrolling>this.GridBodyContainer.firstChild.offsetHeight-this.GridBodyContainer.offsetHeight)this._lastScrollTopUsedForVirtualScrolling=this.GridBodyContainer.scrollTop;if(this.EnableVirtualScrolling&&(this._virtualScrollingHelperBottomAdded||this.UsePagingForVirtualScrolling)&&this.GridBodyContainer.scrollTop!=this._lastScrollTopUsedForVirtualScrolling){this._virtualScrollingTimeout&&window.clearTimeout(this._virtualScrollingTimeout);this.UsePagingForVirtualScrolling&&this._showVirtualScrollingPageInformation();this._virtualScrollingTimeout=window.setTimeout(Obout.Interface.OboutCore.createDelegate(this,this._initiateVirtualScrolling),250)}};oboutGrid.prototype._getVirtualScrollingNewPageIndex=function(){var d=this.getTotalNumberOfPages(),b=this.GridBodyContainer.offsetHeight/d,a=0;if(this.GridBodyContainer.scrollTop>b){var c=(this.GridBodyContainer.scrollTop-b)/this.GridBodyContainer.offsetHeight;if(this.GridBodyContainer.scrollTop>this._lastScrollTopUsedForVirtualScrolling)a=Math.ceil(c);else a=Math.floor(c)}return a};oboutGrid.prototype._initiateVirtualScrolling=function(){this._virtualScrollingTimeout=null;var b=false,a=0;if(!this.UsePagingForVirtualScrolling){b=this.GridBodyContainer.scrollTop>this.GridBodyContainer.firstChild.offsetHeight-this.GridBodyContainer.offsetHeight-parseInt(this.GridBodyContainer.firstChild.style.paddingBottom);a=parseInt(this.PageSelector.value)+1}else{a=this._getVirtualScrollingNewPageIndex();if(a!=parseInt(this.PageSelector.value))b=true}if(b){this.PageSelector.value=a;var c=null;if(!this.UsePagingForVirtualScrolling){this._isVirtualScrollingCallback=true;c="ob_"+this.ID+"IsVirtualScrolling=1"}if(this.UsePagingForVirtualScrolling){this._lastScrollTopUsedForVirtualScrolling=this.GridBodyContainer.scrollTop;this._hideVirtualScrollingPageInformation()}this.initiateCallback(c)}};oboutGrid.prototype._executeOnCallbackScrollingEvents=function(){if(this.Rows.length>=this.getTotalNumberOfRecords()){this._virtualScrollingHelperBottomAdded=false;this.GridBodyContainer.firstChild.style.paddingTop="0px";this.GridBodyContainer.firstChild.style.paddingBottom="0px"}else if(!this.UsePagingForVirtualScrolling){if(!this._virtualScrollingHelperBottomAdded){this._virtualScrollingHelperBottomAdded=true;this.GridBodyContainer.firstChild.style.paddingBottom="50px"}}else{var c=this.getTotalNumberOfPages(),b=this.getCurrentPageIndex(),a=this.GridBodyContainer.offsetHeight*b,d=this.GridBodyContainer.offsetHeight*(c-b-1);this.GridBodyContainer.firstChild.style.paddingTop=a+"px";this.GridBodyContainer.firstChild.style.paddingBottom=d+"px";this._lastScrollTopUsedForVirtualScrolling=a;this.GridBodyContainer.scrollTop=a}this._currentScrollTop=this.GridBodyContainer.scrollTop};oboutGrid.prototype._showVirtualScrollingPageInformation=function(){if(this._virtualScrollingPageInformationContainer==null){this._virtualScrollingPageInformationContainer=document.createElement("DIV");this._virtualScrollingPageInformationContainer.className="ob_gVSPIC";document.body.appendChild(this._virtualScrollingPageInformationContainer)}var a=this.getTotalNumberOfPages(),c=this._getVirtualScrollingNewPageIndex();this._virtualScrollingPageInformationContainer.innerHTML="Page "+(c+1)+" of "+a;var e=this.GridBodyContainer.scrollTop*100/this.GridBodyContainer.firstChild.offsetHeight*(this.GridBodyContainer.offsetHeight-40)/100+20,b=this.getLeft(this.GridBodyContainer)+this.GridBodyContainer.offsetWidth-this._virtualScrollingPageInformationContainer.offsetWidth-20,d=this.getTop(this.GridBodyContainer)+this.GridBodyContainer.scrollTop+e-this._virtualScrollingPageInformationContainer.offsetHeight/2;this._virtualScrollingPageInformationContainer.style.top=d+"px";this._virtualScrollingPageInformationContainer.style.left=b+"px";this._virtualScrollingPageInformationContainer.style.display=""};oboutGrid.prototype._hideVirtualScrollingPageInformation=function(){this._virtualScrollingPageInformationContainer.style.display="none"};oboutGrid.prototype.updateHeightOnResize=function(){this.keepVerticalScrollingInSynch()};oboutGrid.prototype.keepVerticalScrollingInSynch=function(){if(!this.GridBodyContainer)return;if(this.ScrollHeight.indexOf("%")!=-1||this.Height!="0px"){this.GridBodyContainer.style.height="50%";var a=this.GridMainContainer.offsetHeight;if(this.HeaderCornersContainer)a-=this.HeaderCornersContainer.offsetHeight;if(this.GridHeadingContainer)a-=this.GridHeadingContainer.offsetHeight;if(this.GridTopFooterContainer)a-=this.GridTopFooterContainer.offsetHeight;if(this.GridGroupingAreaContainer)a-=this.GridGroupingAreaContainer.offsetHeight;if(this.GridHeaderContainer)a-=this.GridHeaderContainer.offsetHeight;if(this.FilterContainer)a-=this.FilterContainer.offsetHeight;if(this.GridColumnsFooterContainer)a-=this.GridColumnsFooterContainer.offsetHeight;if(this.HorizontalScroller)a-=this.HorizontalScroller.offsetHeight;if(this.GridFooterContainer)a-=this.GridFooterContainer.offsetHeight;if(this.FooterCornersContainer)a-=this.FooterCornersContainer.offsetHeight;if(a<0)a=0;this.GridBodyContainer.style.height=a+"px";this.applyCrossBrowserFixes()}else if(this.ScrollHeight!="0px")if(this.isIE7&&this.isIEWithDoctype())if(parseInt(this.ScrollHeight)<this.GridBodyContainer.firstChild.offsetHeight&&this.hasVerticalScrollBar(this.GridBodyContainer)==false)this.GridBodyContainer.style.overflowY="scroll";else this.GridBodyContainer.style.overflowY="auto";if(this._currentScrollTop&&this._currentScrollTop!=this.GridBodyContainer.scrollTop)this.GridBodyContainer.scrollTop=this._currentScrollTop};oboutGrid.prototype.keepFixedVerticalScrollingInSynch=function(){if(this.GridBodyContainer.firstChild.offsetHeight>parseInt(this.ScrollHeight))this.GridBodyContainer.style.height=this.ScrollHeight;else this.GridBodyContainer.style.height=this.GridBodyContainer.firstChild.offsetHeight+"px"};oboutGrid.prototype.rightAlignGridContent=function(){var a=this.getVisibleColumnsWidth(true);this.GridBodyContainer.firstChild.style.marginLeft="-"+(a-this.ColumnsCollection[this.getIndexOfHelperColumnsForFixedColumns()].Width)+"px";if(this.GridHeaderContainer)this.GridHeaderContainer.firstChild.style.marginLeft=this.GridBodyContainer.firstChild.style.marginLeft;if(this.ShowColumnsFooter)this.GridColumnsFooterContainer.firstChild.style.marginLeft=this.GridBodyContainer.firstChild.style.marginLeft;if(this.AllowFiltering)this.FilterContainer.firstChild.style.marginLeft=this.GridBodyContainer.firstChild.style.marginLeft};oboutGrid.prototype.scrollDownBody=function(){this._preventVirtualScrolling=true;var a=0;if(this.GridBodyContainer.firstChild.style.paddingBottom&&this.EnableVirtualScrolling&&!isNaN(parseInt(this.GridBodyContainer.firstChild.style.paddingBottom)))a=parseInt(this.GridBodyContainer.firstChild.style.paddingBottom);this.GridBodyContainer.scrollTop=parseInt(this.GridBodyContainer.firstChild.offsetHeight);if(a!=0)this.GridBodyContainer.scrollTop-=a};oboutGrid.prototype.hideScrolledColumns=function(){for(var a=0;a<this.ColumnsCollection.length;a++)if(this.ColumnsCollection[a].RealVisible!=this.ColumnsCollection[a].Visible){this.ColumnsCollection[a].Visible=this.ColumnsCollection[a].RealVisible;this.hideColumn(a,false,false)}else if(this.ColumnsCollection[a].Visible){this.ColumnsCollection[a].Visible=false;this.showColumn(a,false,false)}};oboutGrid.prototype.markColumnsAsScrolled=function(a){if(this.ScrolledColumnsIndexes.indexOf(","+a+",")==-1)this.ScrolledColumnsIndexes+=a+",";this.updateScrolledColumnsWidth()};oboutGrid.prototype.unmarkColumnsAsScrolled=function(a){this.ScrolledColumnsIndexes=this.ScrolledColumnsIndexes.replace(","+a+",",",");this.updateScrolledColumnsWidth()};oboutGrid.prototype.updateScrolledColumnsWidth=function(){var b=0;if(this.ScrolledColumnsIndexes!=","){for(var c=this.ScrolledColumnsIndexes.substr(1,this.ScrolledColumnsIndexes.length-2).split(","),a=0;a<c.length;a++)b+=this.ColumnsCollection[c[a]].Width;this.ScrolledColumnsWidth=b}else if(this.PreviousFixedColumnsWidth!=null&&this.getFixedColumnsWidth()!=this.PreviousFixedColumnsWidth){for(var a=this.ColumnsCollection.length-this.NumberOfFixedColumns-1;a>1;a--)if(this.ColumnsCollection[a].Visible){this.PreviousFixedColumnsWidth=this.getFixedColumnsWidth();this.markColumnsAsScrolled(a);break}}else this.ScrolledColumnsWidth=b};oboutGrid.prototype.getFixedColumnsWidth=function(){var d=0,b,c;if(this.FixedColumnsPosition==1){b=0;c=this.NumberOfFixedColumns}else{b=this.ColumnsCollection.length-this.NumberOfFixedColumns;c=this.ColumnsCollection.length}for(var a=b;a<c;a++)if(this.ColumnsCollection[a].Visible)d+=this.ColumnsCollection[a].Width;return d};oboutGrid.prototype.synchronizeFixedColumns=function(){var b=this.HorizontalScroller.firstChild.scrollLeft;if(this.PreviousScrollLeft==b)return;else this.PreviousScrollLeft=b;var g=parseInt(this.ScrollWidth);if(this.FixedColumnsPosition==1){for(var f=this.getVisibleColumnsWidth(false),c=false,a=this.NumberOfFixedColumns;a<this.ColumnsCollection.length-1;a++)if(f>g){if(this.ColumnsCollection[a].Visible)if(b>=this.ScrolledColumnsWidth){this.hideColumn(a,false,false);this.markColumnsAsScrolled(a);f=this.getVisibleColumnsWidth(false);c=true}else break}else break;if(!c)for(var a=this.ColumnsCollection.length-2;a>=this.NumberOfFixedColumns;a--)if(this.ColumnsCollection[a].RealVisible==true&&this.ColumnsCollection[a].Visible==false)if(b<=this.ScrolledColumnsWidth-this.ColumnsCollection[a].Width){this.showColumn(a,false,false);this.unmarkColumnsAsScrolled(a)}else break}else{for(var e=false,c=false,d=this.getFixedColumnsWidth()-this.PreviousFixedColumnsWidth,a=1;a<this.ColumnsCollection.length-this.NumberOfFixedColumns;a++)if(this.ColumnsCollection[a].RealVisible==true&&this.ColumnsCollection[a].Visible==false)if(b-d>=this.ScrolledColumnsWidth){this.showColumn(a,false,false);this.markColumnsAsScrolled(a);e=true}else break;var h=false;if(!e)for(var a=this.ColumnsCollection.length-this.NumberOfFixedColumns-1;a>0;a--)if(this.ColumnsCollection[a].Visible)if(b-d<=this.ScrolledColumnsWidth-this.ColumnsCollection[a].Width){this.hideColumn(a,false,false);this.unmarkColumnsAsScrolled(a);d=this.getFixedColumnsWidth()-this.PreviousFixedColumnsWidth;c=true}else break;if(e||c){this.rightAlignGridContent();if(b==0){this.PreviousFixedColumnsWidth=this.getFixedColumnsWidth();this.ScrolledColumnsIndexes=",";this.updateScrolledColumnsWidth()}}}};try{if(Sys)Sys.Application&&Sys.Application.notifyScriptLoaded()}catch(ex){};