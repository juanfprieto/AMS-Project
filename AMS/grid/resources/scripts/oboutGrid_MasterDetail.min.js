oboutGrid.CachedMasterDetailGridsCollection;oboutGrid.prototype.initMasterDetailRelatedProperties=function(){this.OnLoadMasterDetailActionsExecuted=false;try{this.executeOnLoadMasterDetailActions()}catch(a){}this.DetailsBtnOpen=new Image;this.DetailsBtnOpen.src=this.xmlCdataDecode(this.ImagesURL.DetailsBtnOpen);this.DetailsBtnClose=new Image;this.DetailsBtnClose.src=this.xmlCdataDecode(this.ImagesURL.DetailsBtnClose);this.MasterRowIndexToCache=-1;this.LoadingDetailGridRow=[];this.DetailGrids=this.HasDetailGrids?[]:null;this.updateMasterDetailGridsCollection()};oboutGrid.prototype.executeOnLoadMasterDetailActions=function(){if(this.MasterGridID)if(eval(this.MasterGridID)==null){window.setTimeout(this.ID+".executeOnLoadMasterDetailActions()",150);return}var i=this;if(this.HasDetailGrids)for(var d=this.getBodyTableBody(),a=0;a<d.childNodes.length;a++)if(this.isBodyRecord(d.childNodes[a])){var f=this.getExpandCollapseDetailsButtonForRow(d.childNodes[a]);this.stopAllEventsPropagation(f.parentNode);f.onclick=function(){i.manageDetailGridsExpandedState(this)}}this.ExpandedMasterRowsContainer=oboutUtils.getById(this.ElementsClientIds.ExpandedMasterRowsContainerID);this.clearExpandedMasterRowsContainer();if(this.MasterGridID){var g=eval(this.MasterGridID);if(g.ShowEmptyDetails==false){var b="";if(this.getTotalNumberOfRecords()==0){this.GridMainContainer.style.display="none";b="none"}for(var c=this.GridMainContainer.parentNode,a=0;a<c.childNodes.length;a++)if(c.childNodes[a].nodeName=="DIV"&&c.childNodes[a].style.display!="none"){b="";break}for(var h=this.getMasterRow(),e=h.getElementsByTagName("IMG"),a=0;a<e.length;a++)if(e[a].parentNode.className=="ob_gDGEB"){e[a].style.display=b;break}}}this.OnLoadMasterDetailActionsExecuted=true};oboutGrid.prototype.executeOnLoadDetailGridActions=function(){this.clearExpandedMasterRowsContainer()};oboutGrid.prototype.manageDetailGridsExpandedState=function(c){var e=c.src.toString()==this.DetailsBtnOpen.src.toString()?"hidden":"visible",f=this.getRowForExpandCollapseDetailsButton(c),a=f.nextSibling;if(a&&a.firstChild&&a.firstChild.firstChild&&a.firstChild.firstChild.className==this.CSSRowEditTemplate&&a.nextSibling)a=a.nextSibling;var d=false;if(this.DetailGridsLoadingMode=="OnCallback"&&(a==null||!this.isDetailGridContainerRow(a)))d=true;if(a!=null||this.DetailGridsLoadingMode=="OnCallback"){if(a!=null)if(e=="hidden")a.style.display="";else a.style.display="none";this.toggleDetailGridExpander(c,e)}if(d){var g=this,b=this.getElementIndex(f);if(this.RecordInEditMode==b){var i=this.cancelEdit(this.RecordInEditMode);if(i==false)return}this.cacheExpandedMasterRow(b,true);var h="ob_"+this.ID+"MasterRowForDetailGrid="+this.getRecordValues(b);this.initiateCallback(h,g.loadDetailGrid,true,function(){g.showDetailGridLoadingState(a)})}};oboutGrid.prototype.toggleDetailGridExpander=function(a,b){if(b=="visible")a.src=this.DetailsBtnOpen.src;else a.src=this.DetailsBtnClose.src};oboutGrid.prototype.showDetailGridLoadingState=function(a){var b=this.createDetailGridContainingRow();if(a.nextSibling)a.parentNode.insertBefore(b,a.nextSibling);else a.parentNode.appendChild(b);a.parentNode.removeChild(a);this.LoadingDetailGridRow.push(b)};oboutGrid.prototype.createDetailGridContainingRow=function(){var b=document.createElement("TR");b.className=this.CSSDetailGridContainer;var a=document.createElement("TD");a.colSpan=this.ColumnsCollection.length+this.getFirstColumnIndex();if(this.ShowLoadingMessage){a.className=this.CSSLoadingMessage;var c=document.createElement("DIV");c.innerHTML=this.Localization_LoadingText;a.appendChild(c)}else b.style.display="none";b.appendChild(a);return b};oboutGrid.prototype.loadDetailGrid=function(j){var b=this,h=document.createElement("DIV");h.innerHTML=j;for(var d=h.getElementsByTagName("TR"),a=0;a<d.length;a++)if(d[a].className==b.CSSDetailGridContainer){var c=b.LoadingDetailGridRow[0],k=d[a].firstChild.firstChild.firstChild.nodeName;c.removeChild(c.firstChild);b.PreventDetailGridInitialization=true;c.appendChild(d[a].firstChild);b.PreventDetailGridInitialization=false;if(!this.ShowLoadingMessage)c.style.display="";b.LoadingDetailGridRow.splice(0,1);break}if(c){b.bCallbackInitiated=false;b.loadCallbackScripts(c);b.executeCallbackScripts();for(var g=false,e=c.getElementsByTagName("DIV"),a=0;a<e.length;a++)if(e[a].className=="ob_gMDJsScriptContainer"){eval(e[a].innerHTML);g=true}if(!g&&b.ShowEmptyDetails==false){c.style.display="none";for(var i=c.previousSibling,f=i.getElementsByTagName("IMG"),a=0;a<f.length;a++)if(f[a].parentNode.className=="ob_gDGEB"){f[a].style.display="none";break}}}b.clearExpandedMasterRowsContainer()};oboutGrid.prototype.cacheExpandedMasterRow=function(c,e,d){var a=this.getRootGrid();if(e)a.ExpandedMasterRowsContainer.value="";var b;if(typeof d=="undefined")b=this.getRecordValues(c);else b=d.getRecordValues(c);if(a.ExpandedMasterRowsContainer.value!="")a.ExpandedMasterRowsContainer.value=this.ArrayElementsSeparatorEncoded+a.ExpandedMasterRowsContainer.value;a.ExpandedMasterRowsContainer.value=b+a.ExpandedMasterRowsContainer.value};oboutGrid.prototype.clearExpandedMasterRowsContainer=function(){var a=this.getRootGrid();if(a!=null&&a.ExpandedMasterRowsContainer!=null)a.ExpandedMasterRowsContainer.value=""};oboutGrid.prototype.cacheExpandedGridsHierarchy=function(){var a=this,c=this.getRootGrid();a!=c;while(a.MasterGridID!=""){var b=eval(a.MasterGridID),d=a.getMasterRow();c.cacheExpandedMasterRow(b.getElementIndex(d),false,b);a=b}};oboutGrid.prototype.getRootGrid=function(){var a=this;while(a.MasterGridID!=""){var b=eval(a.MasterGridID);a=b}return a};oboutGrid.prototype.ensureDetailGridDisplayCompliance=function(a){var d=a.firstChild.firstChild,b=d.firstChild.src.toString().indexOf("plus.gif")!=-1?"none":"",c=this.getStyle(a.nextSibling,"display");if(b!=c)a.nextSibling.style.display=b};oboutGrid.prototype.updateMasterDetailGridsCollection=function(){if(this.MasterGridID){var c=eval(this.MasterGridID);if(c)c.addDetailGrid(this);else{var a=this.getCachedMasterDetailGridsCollection(this.MasterGridID);a.push(this)}}if(this.hasCachedMasterDetailGridsCollection()){var a=this.getCachedMasterDetailGridsCollection(this.ID);if(a){for(var b=0;b<a.length;b++)this.addDetailGrid(a[b]);this.clearCachedMasterDetailGridsCollection(this.ID)}}};oboutGrid.prototype.addDetailGrid=function(b){if(this.DetailGrids==null)this.DetailGrids=[];for(var c=false,a=0;a<this.DetailGrids.length;a++)if(this.DetailGrids[a].ForeignKeys==b.ForeignKeys){c=true;break}!c&&this.DetailGrids.push(b)};oboutGrid.prototype.getCachedMasterDetailGridsCollection=function(a){if(oboutGrid.CachedMasterDetailGridsCollection==null)oboutGrid.CachedMasterDetailGridsCollection={};if(oboutGrid.CachedMasterDetailGridsCollection[a]==null)oboutGrid.CachedMasterDetailGridsCollection[a]=[];return oboutGrid.CachedMasterDetailGridsCollection[a]};oboutGrid.prototype.clearCachedMasterDetailGridsCollection=function(a){oboutGrid.CachedMasterDetailGridsCollection[a]=null};oboutGrid.prototype.hasCachedMasterDetailGridsCollection=function(){return oboutGrid.CachedMasterDetailGridsCollection!=null&&oboutGrid.CachedMasterDetailGridsCollection[this.ID]!=null?true:false};oboutGrid.prototype.getDetailGrid=function(b){if(this.DetailGrids!=null)for(var a=0;a<this.DetailGrids.length;a++){var c=true;for(var d in b)if(b[d]!=this.DetailGrids[a].ForeignKeys[d].Value){c=false;break}if(c)return this.DetailGrids[a]}else return null};try{if(Sys)Sys.Application&&Sys.Application.notifyScriptLoaded()}catch(ex){};